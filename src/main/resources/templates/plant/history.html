<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>설비 이력 · CMMS</title>
    <!-- common CSS is loaded via layout/defaultLayout -->
    <!-- local fallback for design-only preview without server -->
    <link rel="stylesheet" href="../../static/assets/css/base.css" />
  </head>
  <body>
    <div class="page">
      <!-- Main Content -->
      <section data-slot-root th:fragment="content" data-page="plant-history" data-module="plant-history">
        <main>
          <div class="container">
            <!-- 설비 선택 섹션 -->
            <section class="card">
              <div class="card-header">
                <div class="card-title">설비 선택</div>
                <div class="toolbar">
                  <a class="btn" th:href="@{/plant/list}">목록</a>
                </div>
              </div>
              <div class="card-body">
                <div class="section">
                  <div class="section-title">설비 검색</div>
                  <div class="grid cols-12">
                    <div class="col-span-4">
                      <input class="input" placeholder="설비번호" name="plantId" th:value="${plantId}" id="plant-search" />
                    </div>         
                    <div class="col-span-4">
                      <input class="input" placeholder="설비명" name="plantName" th:value="${plantName}" />
                    </div>   
                    <div class="col-span-4 actions actions-left-align">
                      <button class="btn" data-clear-search>초기화</button>
                      <button class="btn" data-plant-search>검색</button>
                    </div>
                  </div>
                </div>

                <!-- 설비 검색 결과 -->
                <div class="section hidden" id="plant-search-results">
                  <div class="section-title">검색 결과</div>
                  <table class="table">
                    <thead>
                      <tr>
                        <th style="width:120px">설비번호</th>
                        <th>설비명</th>
                        <th style="width:120px">Site</th>
                        <th style="width:120px">기능위치</th>
                        <th style="width:140px">부서</th>
                        <th style="width:140px">액션</th>
                      </tr>
                    </thead>
                    <tbody id="plant-results-body">
                      <!-- 검색 결과가 여기에 표시됩니다 -->
                    </tbody>
                  </table>
                </div>
              </div>
            </section>

            <!-- 선택된 설비 정보 섹션 -->
            <section class="card hidden" id="plant-info-section">
              <div class="card-header">
                <div class="card-title">설비 정보</div>
                <div class="toolbar">
                  <a class="btn" th:href="@{/plant/detail/{id}(id=${plantId})}" id="plant-detail-link">상세보기</a>
                  <a class="btn" th:href="@{/plant/edit/{id}(id=${plantId})}" id="plant-edit-link">수정</a>
                </div>
              </div>
              <div class="card-body">
                <div class="section">
                  <div class="section-title">기본정보</div>
                  <div class="grid cols-12">
                    <div class="stack col-span-3"><div class="label">설비번호</div><div id="info-plant-id">-</div></div>
                    <div class="stack col-span-9"><div class="label">설비명</div><div id="info-plant-name">-</div></div>
                    <div class="stack col-span-3"><div class="label">자산유형</div><div id="info-asset-type">-</div></div>
                    <div class="stack col-span-3"><div class="label">Site</div><div id="info-site">-</div></div>
                    <div class="stack col-span-3"><div class="label">관리부서</div><div id="info-dept">-</div></div>
                    <div class="stack col-span-3"><div class="label">기능위치</div><div id="info-func">-</div></div>
                    <div class="stack col-span-4"><div class="label">제조사</div><div id="info-maker">-</div></div>
                    <div class="stack col-span-4"><div class="label">모델</div><div id="info-model">-</div></div>
                    <div class="stack col-span-4"><div class="label">설치일</div><div id="info-install-date">-</div></div>
                  </div>
                </div>
              </div>
            </section>

            <!-- 예방점검 이력 섹션 -->
            <section class="card hidden" id="inspection-history-section">
              <div class="card-header">
                <div class="card-title">예방점검 이력</div>
                <div class="toolbar">
                  <a class="btn" th:href="@{/inspection/form}">새 점검</a>
                </div>
              </div>
              <div class="card-body">
                <div class="history-container" style="max-height: 300px; overflow-y: auto;">
                  <table class="table">
                    <thead>
                      <tr>
                        <th style="width:140px">점검번호</th>
                        <th>점검명</th>
                        <th style="width:100px">작업유형</th>
                        <th style="width:140px">계획일</th>
                        <th style="width:140px">실적일</th>
                        <th style="width:100px">상태</th>
                        <th style="width:140px">액션</th>
                      </tr>
                    </thead>
                    <tbody id="inspection-history-body">
                      <!-- 점검 이력이 여기에 표시됩니다 -->
                    </tbody>
                  </table>
                </div>
              </div>
            </section>

            <!-- 작업오더 이력 섹션 -->
            <section class="card hidden" id="workorder-history-section">
              <div class="card-header">
                <div class="card-title">작업오더 이력</div>
                <div class="toolbar">
                  <a class="btn" th:href="@{/workorder/form}">새 작업</a>
                </div>
              </div>
              <div class="card-body">
                <div class="history-container" style="max-height: 300px; overflow-y: auto;">
                  <table class="table">
                    <thead>
                      <tr>
                        <th style="width:140px">작업번호</th>
                        <th>작업명</th>
                        <th style="width:100px">작업유형</th>
                        <th style="width:140px">계획일</th>
                        <th style="width:140px">실적일</th>
                        <th style="width:100px">상태</th>
                        <th style="width:140px">액션</th>
                      </tr>
                    </thead>
                    <tbody id="workorder-history-body">
                      <!-- 작업오더 이력이 여기에 표시됩니다 -->
                    </tbody>
                  </table>
                </div>
              </div>
            </section>

            <!-- 작업허가 이력 섹션 -->
            <section class="card hidden" id="workpermit-history-section">
              <div class="card-header">
                <div class="card-title">작업허가 이력</div>
                <div class="toolbar">
                  <a class="btn" th:href="@{/workpermit/form}">새 허가</a>
                </div>
              </div>
              <div class="card-body">
                <div class="history-container" style="max-height: 300px; overflow-y: auto;">
                  <table class="table">
                    <thead>
                      <tr>
                        <th style="width:140px">허가번호</th>
                        <th>작업명</th>
                        <th style="width:100px">작업유형</th>
                        <th style="width:140px">신청일</th>
                        <th style="width:140px">승인일</th>
                        <th style="width:100px">상태</th>
                        <th style="width:140px">액션</th>
                      </tr>
                    </thead>
                    <tbody id="workpermit-history-body">
                      <!-- 작업허가 이력이 여기에 표시됩니다 -->
                    </tbody>
                  </table>
                </div>
              </div>
            </section>
          </div>
        </main>
      </section>
    </div>
    
    <!-- 인라인 스크립트는 plant.js로 이관됨 -->
  </body>
  </html>
